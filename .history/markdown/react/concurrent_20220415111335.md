
### Concurrent

Concurrent 并发 是 React18 核心渲染模型的基础性更新，也就是 React18 的新特性都是基于Concurrent实现。

Concurrent 可以看作是一个机制，而这个底层机制允许React在同一时间准备多个版本的UI。React内部用了很多复杂的技术来实现Concurrent，例如优先队列和多重缓冲。

### 核心特性

_可中断_

在使用Concurrent特性之前，React的渲染是一个单一的，不可中断的，同步的。这说明一旦React开始渲染，直到React结束渲染，中间是持续的，不可中断的，不可执行其他代码的。一旦某次渲染比较复杂，耗时较长，就会出现卡顿的感觉。

而通过使用Concurrent特性，React的渲染过程变得可中断，中断后也可恢复渲染，当然也可以直接放弃渲染。

_state可重用_

React18 提供了一个组件<OffScreen> 使我们可以做到在离开当前视图并在之后返回这个视图时可以恢复离开时的状态，即保存状态并在回来时可重用这份状态




_带consumer_

这种方式更好用，在需要用到context的组件外包一层consumer

``` js
// 默认值"fucking left"，当组件所处的tree中没有找到provider的时候这个默认值才会生效
const LeftContext = React.createContext("fucking left");

class Left extends React.Component {
  render() {
    return (
      <LeftContext.Consumer>
        {(value) => <div>{value}</div>}
      </LeftContext.Consumer>
    );
  }
}

export default function App() {
  return (
    // Provider只有一个value参数。多个 Provider 也可以嵌套使用，里层的会覆盖外层的数据。
    <LeftContext.Provider value={"aaaa"}>
      <Left />
    </LeftContext.Provider>
  );
}
```

export const ContextMeta = {
  anchors: [
    '新版context',
    '旧版context',
  ]
}